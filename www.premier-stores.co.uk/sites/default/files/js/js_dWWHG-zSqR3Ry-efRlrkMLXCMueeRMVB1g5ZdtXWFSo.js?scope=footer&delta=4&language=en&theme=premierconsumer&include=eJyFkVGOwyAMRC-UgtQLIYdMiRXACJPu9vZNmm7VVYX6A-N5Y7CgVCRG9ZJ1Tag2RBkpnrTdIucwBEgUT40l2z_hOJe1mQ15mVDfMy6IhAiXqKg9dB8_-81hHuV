/* @license MIT https://github.com/atomiks/tippyjs/blob/master/LICENSE */
;
/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($,Drupal,once){'use strict';Drupal.webform=Drupal.webform||{};Drupal.webform.elementHelpIcon=Drupal.webform.elementHelpIcon||{};Drupal.webform.elementHelpIcon.options=Drupal.webform.elementHelpIcon.options||{};Drupal.behaviors.webformElementHelpIcon={attach:function(context){if(!window.tippy)return;var hideOnEsc={name:'hideOnEsc',defaultValue:true,fn:function fn(_ref){var hide=_ref.hide;function onKeyDown(event){if(event.keyCode===27)hide();}return {onShow:function onShow(){document.addEventListener('keydown',onKeyDown);},onHide:function onHide(){document.removeEventListener('keydown',onKeyDown);}};}};$(once('webform-element-help','.js-webform-element-help',context)).each(function(){var $link=$(this);$link.on('click',function(event){event.preventDefault();});var options=$.extend({content:$link.attr('data-webform-help'),delay:100,allowHTML:true,interactive:true,plugins:[hideOnEsc]},Drupal.webform.elementHelpIcon.options);tippy(this,options);});}};})(jQuery,Drupal,once);;
((Drupal)=>{Drupal.Message=class{constructor(messageWrapper=null){if(!messageWrapper)this.messageWrapper=Drupal.Message.defaultWrapper();else this.messageWrapper=messageWrapper;}static defaultWrapper(){let wrapper=document.querySelector('[data-drupal-messages]')||document.querySelector('[data-drupal-messages-fallback]');if(!wrapper){wrapper=document.createElement('div');document.body.appendChild(wrapper);}if(wrapper.hasAttribute('data-drupal-messages-fallback')){wrapper.removeAttribute('data-drupal-messages-fallback');wrapper.classList.remove('hidden');}wrapper.setAttribute('data-drupal-messages','');return wrapper.innerHTML===''?Drupal.Message.messageInternalWrapper(wrapper):wrapper.firstElementChild;}static getMessageTypeLabels(){return {status:Drupal.t('Status message'),error:Drupal.t('Error message'),warning:Drupal.t('Warning message')};}add(message,options={}){if(!options.hasOwnProperty('type'))options.type='status';if(typeof message!=='string')throw new Error('Message must be a string.');Drupal.Message.announce(message,options);options.id=options.id?String(options.id):`${options.type}-${Math.random().toFixed(15).replace('0.','')}`;if(!Drupal.Message.getMessageTypeLabels().hasOwnProperty(options.type)){const {type}=options;throw new Error(`The message type, ${type}, is not present in Drupal.Message.getMessageTypeLabels().`);}this.messageWrapper.appendChild(Drupal.theme('message',{text:message},options));return options.id;}select(id){return this.messageWrapper.querySelector(`[data-drupal-message-id^="${id}"]`);}remove(id){return this.messageWrapper.removeChild(this.select(id));}clear(){Array.prototype.forEach.call(this.messageWrapper.querySelectorAll('[data-drupal-message-id]'),(message)=>{this.messageWrapper.removeChild(message);});}static announce(message,options){if(!options.priority&&(options.type==='warning'||options.type==='error'))options.priority='assertive';if(options.announce!=='')Drupal.announce(options.announce||message,options.priority);}static messageInternalWrapper(messageWrapper){const innerWrapper=document.createElement('div');innerWrapper.setAttribute('class','messages__wrapper');messageWrapper.insertAdjacentElement('afterbegin',innerWrapper);return innerWrapper;}};Drupal.theme.message=({text},{type,id})=>{const messagesTypes=Drupal.Message.getMessageTypeLabels();const messageWrapper=document.createElement('div');messageWrapper.setAttribute('class',`messages messages--${type}`);messageWrapper.setAttribute('role',type==='error'||type==='warning'?'alert':'status');messageWrapper.setAttribute('data-drupal-message-id',id);messageWrapper.setAttribute('data-drupal-message-type',type);messageWrapper.setAttribute('aria-label',messagesTypes[type]);messageWrapper.innerHTML=`${text}`;return messageWrapper;};})(Drupal);;
(function($,Drupal,drupalSettings,once){Drupal.behaviors.customKBAValidation={attach:function(context,settings){$(once('custom-kba-validation','.custom-kba-validation',context)).on('input blur',function(){var param=$(this).attr('id');validateInput.call(this,param);});}};Drupal.behaviors.customKBAUniqueAnswer={attach:function(context,settings){$(once('custom-kba-unique-answer','.custom-kba-validation',context)).on('blur',function(){var textfield1=$('#kba-answer-1').val();var textfield2=$('#kba-answer-2').val();var textfield3=$('#kba-answer-3').val();var kba_answer_length=drupalSettings.miniorange_2fa.kba_answer_length;var inputValue=$(this).val().trim();var pattern=/^[\w\s]+$/;var isValid=pattern.test(inputValue);var message='Answers must be unique.';if(isValid&&inputValue.length>=kba_answer_length)if(textfield1===textfield2&&textfield1===textfield3&&textfield2===textfield3)$('#kba-answer-2')[0].setCustomValidity(Drupal.t(message));else if(textfield1===textfield2)$('#kba-answer-2')[0].setCustomValidity(Drupal.t(message));else if(textfield2===textfield3)$('#kba-answer-3')[0].setCustomValidity(Drupal.t(message));else if(textfield1===textfield3)$('#kba-answer-3')[0].setCustomValidity(Drupal.t(message));else{$('#kba-answer-1')[0].setCustomValidity('');$('#kba-answer-2')[0].setCustomValidity('');$('#kba-answer-3')[0].setCustomValidity('');}});}};function validateInput(textfield){var kba_answer_length=drupalSettings.miniorange_2fa.kba_answer_length;var answer_textfield=$('#'+textfield)[0];var inputValue=$('#'+textfield).val().trim();var pattern=/^[\w\s]+$/;if(inputValue.length>=1)if(inputValue.length<kba_answer_length)if(!pattern.test(inputValue))answer_textfield.setCustomValidity(Drupal.t('Only alphanumeric characters are allowed.'));else answer_textfield.setCustomValidity(Drupal.t('Answers must contain at least @length characters.',{'@length':kba_answer_length}));else if(!pattern.test(inputValue))answer_textfield.setCustomValidity(Drupal.t('Only alphanumeric characters are allowed.'));else answer_textfield.setCustomValidity('');}})(jQuery,Drupal,drupalSettings,once);;
